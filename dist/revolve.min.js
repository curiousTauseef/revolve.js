!function(e,t){"function"==typeof define&&define.amd?define(["RevolveThemes"],t):"object"==typeof module&&module.exports?module.exports=t(require("RevolveThemes")):e.Revolve=t(e.RevolveThemes)}("undefined"!=typeof self?self:this,function(e){let t={clock:(e,t)=>{let r=new s(e,t);return g(t.theme||"classic",(e,t)=>{r.theme=e,r.init()}),r},gauge:(e,t)=>{let s=new r(e,t);return g(t.theme||"unitless",(e,t)=>{s.theme=e,s.init()}),s},themes:e};class r{constructor(e,t){e.obj=this,this.ctx=e,x(!0,this,{logicalSize:512,label:"Revolve.js | v1.3.0",mode:"discrete",layout:"auto",center:[0,0],radius:Math.min(e.canvas.width,e.canvas.height)/2},t)}init(){this.theme.axes&&(this.axes={},Object.keys(this.theme.axes).forEach(e=>{let t=this.theme.axes[e];this.axes[e]=new n(t.pointA.angle,t.pointB.angle,t.pointA.value,t.pointB.value)},this)),this.render()}set value(e){!e||v(e)&&!e.trim()?this.safeValue=0:v(e)?this.safeValue=parseFloat(e):this.safeValue=e}render(){this.ctx.canvas.width==this.ctx.canvas.clientWidth&&this.ctx.canvas.height==this.ctx.canvas.clientHeight||this.resize(this.ctx.canvas.clientWidth,this.ctx.canvas.clientHeight);let e=this.theme;e.layers&&Object.keys(e.layers).forEach(t=>{a[e.layers[t].type](this.ctx,this,e.layers[t])},this)}resize(e,t){this.ctx.canvas.width=e,this.ctx.canvas.height=t,"auto"===this.layout&&(this.radius=Math.min(e,t)/2)}}class s extends r{constructor(e,t){super(e,t)}init(){super.init(),this.paused||this.start()}start(){this.timer||(this.started=c(),this.paused=!1,this.timer=setInterval((()=>{let e=c();if("continuous"===this.mode)this.safeValue=e,this.render();else{let t=this.theme.pulse||1e3,r=Math.floor(e/t)*t;r!==this.safeValue&&(this.safeValue=r,this.render())}}).bind(this),this.interval||1e3/24))}stop(){this.paused=!0,this.timer&&(clearInterval(this.timer),this.timer=null)}set value(e){if(null==e||v(e)&&!e.trim())this.safeValue=c();else if(v(e)){let t=e.split(":").map(e=>parseInt(e,10));for(;t.length<4;)t.push(0);let r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDay(),t[0],t[1],t[2]);this.safeValue=c(s)}else e instanceof Date&&(this.safeValue=c(e))}}class n{constructor(e,t,r,s){this.pointA={angle:e,value:r},this.pointB={angle:t,value:s};let n=e<t?t-e:360-e+t,i=Math.abs(s-r);this.unitDegrees=n/i}toAngle(e){return this.pointA.angle+(e-this.pointA.value)*this.unitDegrees}}const i={HOURS:new n(0,360,0,432e5),HOURS24:new n(0,360,0,864e5),MINUTES:new n(0,360,0,36e5),SECONDS:new n(0,360,0,6e4)};class a{static arc(e,t,r,s){s||l(e,t,r),s&&e.beginPath();let n=void 0!==r.radius?p(r.radius,t):t.radius,i=r.border?p(r.border.width,t):0,a=void 0===r.degrees?2*Math.PI:o*(r.degrees-(s?0:90)),c=r.center||t.center,u=void 0===r.start||s?0:o*(r.start-90);e.arc(p(c[0],t),p(c[1],t),n-i/2,u,a),r.color&&e.fill(),r.border&&e.stroke()}static circle(e,t,r){a.arc(e,t,r)}static rect(e,t,r){e.rect(p(r.bounds[0],t),p(r.bounds[1],t),p(r.bounds[2],t),p(r.bounds[3],t)),r.color&&e.fill(),r.border&&e.stroke()}static triangle(e,t,r){e.beginPath(),e.moveTo(p(r.points[0].x,t),p(r.points[0].y,t)),e.lineTo(p(r.points[1].x,t),p(r.points[1].y,t)),e.lineTo(p(r.points[2].x,t),p(r.points[2].y,t)),e.closePath(),r.color&&e.fill(),r.border&&e.stroke()}static path(e,t,r){e.beginPath(),e.moveTo(p(r.points[0].x,t),p(r.points[0].y,t)),r.points.slice(1).forEach(r=>{e.lineTo(p(r.x,t),p(r.y,t))}),e.closePath(),r.color&&e.fill(),r.border&&e.stroke()}static sector(e,t,r){l(e,t,r);let s=(r.from-90)*o,n=(r.to-90)*o,i=void 0!==r.radius?p(r.radius,t):t.radius,a=r.center||t.center;e.arc(p(a[0],t),p(a[1],t),i,s,n),e.lineTo(p(a[0],t),p(a[1],t)),e.closePath(),r.color&&e.fill(),r.border&&e.stroke()}static radial(e,t,r){l(e,t,r);let s=function(e){if(e.count)return e.count;let t=12;switch(e.content){case"text":case"ticks":"minute"===e.layout||"second"===e.layout?t=60:"hour"===e.layout?t=12:"24"===e.layout?t=24:"120"===e.layout&&(t=120)}return t}(r),n=r.degrees||r.radians||360/s;for(let i=0;i<s;i++)if(!(r.exclude&&r.exclude.includes(i)||r.include&&!r.include.includes(i))){if(e.resetTransform(),e.translate(e.canvas.width/2,e.canvas.height/2),e.translate(t.center[0],t.center[1]),r.orient||"text"!==r.content){let t=i*n+(r.start||0)+0,s=r.radians?i*r.radians:o*t;e.rotate(s)}e.translate(-t.center[0],-t.center[1]),"text"===r.content?u(i,e,t,r):"ticks"===r.content?h(i,e,t,r):"arcs"===r.content?a.arc(e,t,r,!0):Array.isArray(r.content)&&(r.content.forEach(r=>{this[r.type](e,t,r)},a),r.color&&e.fill(),r.border&&e.stroke())}}static text(e,t,r){l(e,t,r),e.font=r.weight+" "+p(r.size,t)+"px "+r.family,r.value||(r.value="");let s,n,i=r.value.length>0&&"$"===r.value[0]?t[r.value.substr(1)]:r.value;if(void 0===i&&(i=""),"center"===r.align){let a=e.measureText(i);s=p(r.pos[0],t)-a.width/2,n=p(r.pos[1]+r.size/2,t)}else s=p(r.pos[0],t),n=p(r.pos[1],t);e.fillText(i,s,n)}static arm(e,t,r){if(l(e,t,r),!r.axis)return;let s=r.axis.trim().toUpperCase(),n=t.axes&&t.axes[s]||i[s],c=r.relative?t.safeValue-t.started:t.safeValue;e.translate(t.center[0],t.center[1]),e.rotate(o*n.toAngle(c)),e.translate(-t.center[0],-t.center[1]),Array.isArray(r.layers)?(r.layers.forEach(r=>{this[r.type](e,t,r)},a),r.color&&e.fill(),r.border&&e.stroke()):r.style&&"line"!==r.style?"rect"===r.style?(e.rect(t.center[0]-p(r.width,t)/2,t.center[1]-p(r.length,t),p(r.width,t),p(r.length+r.offset,t)),e.fill()):y(r.style)&&r.style(e,t,r):(e.lineWidth=p(r.width,t),e.moveTo(t.center[0],t.center[1]+p(r.offset,t)),e.lineTo(t.center[0],t.center[1]-p(r.length,t)),e.stroke())}static events(e,t,r){e.resetTransform(),t.events&&t.events.forEach((s,n)=>{let i=s.from.split(":").map(e=>parseInt(e,10));for(;i.length<4;)i.push(0);let o=s.to.split(":").map(e=>parseInt(e,10));for(;o.length<4;)o.push(0);let l={color:["#0c52eb","red","green","gold","orange","white"][n],radius:r.radius[0]-r.width*n,from:f(i)/2+180,to:f(o)/2+180};if(0===n){let r=l.color;l.color="black",a.circle(e,t,l),l.color=r}a.sector(e,t,l),l.color="black",l.radius-=r.width,a.circle(e,t,l)})}}const o=Math.PI/180;function l(e,t,r){e.resetTransform(),e.translate(e.canvas.width/2,e.canvas.height/2),e.beginPath(),r.color&&(e.fillStyle=e.strokeStyle=function(e,t,r){if(v(e))return e;if(m(e)){let s=e.extent.map(e=>p(e,r)),n="radial"===e.type?t.createRadialGradient.apply(t,s):t.createLinearGradient.apply(t,s);return e.stops.forEach(e=>{n.addColorStop(e.pos,e.color)}),n}return null}(r.color,e,t)),r.border&&(e.strokeStyle=r.border.color,e.lineWidth=p(r.border.width,t)),r.shadow?(e.shadowBlur=r.shadow,e.shadowColor=r.shadowColor):(e.shadowBlur=0,e.shadowColor="#00000000")}function c(e){e=e||new Date;let t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);return e.getTime()-t.getTime()}function u(e,t,r,s){t.font=s.weight.toString()+" "+p(s.size,r)+"px "+s.family,t.strokeStyle=t.fillStyle=s.color;let n=y(s.text)?s.text:d;t.beginPath();let i=function(e,t,r){if(r.orient)return[t.center[0],t.center[1]-p(r.radius,t)];let s=p(r.radius||190,t),n=r.degrees||30;r.start=r.start||0;let i=((r.start||0)+e*n-90)*o;return[t.center[0]+s*Math.cos(i),t.center[1]+s*Math.sin(i)]}(e,r,s),a=n(e,s),l=t.measureText(a);s.background&&(t.fillStyle=s.background,t.fillRect(i[0]-l.width/2,i[1]+p(s.size/3,r)-p(s.size,r),l.width,p(s.size+2,r)),t.fillStyle=s.color),t.fillText(a,i[0]-l.width/2,i[1]+p(s.size/3,r))}function h(e,t,r,s){let n=p(s.radius,r)||r.radius;s.border?(t.rect(r.center[0]-p(s.width/2,r),r.center[1]-n,p(s.width,r),p(s.length,r)),t.fill(),t.stroke()):(t.lineWidth=p(s.width,r),t.strokeStyle=s.color,t.moveTo(r.center[0],r.center[1]-n),t.lineTo(r.center[0],r.center[1]-n+p(s.length,r)),t.stroke())}function d(e,t){if(v(t.text)){switch(t.text){case"roman":return["X11","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"][e];case"minutes":var r=5*e;return(r>9?r:"0"+r).toString();case"HH":return(e=e||12)<10?"0"+e:e.toString();case"12":return e||12;case"10":return e||10;case"NN":case"24":return e<10?"0"+e:e.toString();case"31":var s=e+1;return s<10?"0"+s:s.toString();case"months":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e].toUpperCase()}if("*"===t.text[0]){return(e*parseInt(t.text.substr(1),10)).toString()}}else if(t.text&&t.text.length)return t.text[e].toString();return e.toString()}function f(e){return(60*e[0]+e[1]+e[2]/60+e[3]/6e4)/2}function p(e,t){let r=2*t.radius;if(v(e)){let t=/\s*(\d+\.?\d*)\s*(px|%)?/.exec(e);if(null!=t&&3===t.length){let s=t[1],n=parseFloat(s);switch((t[2]||"").toLowerCase().trim()){case"px":return n;case"%":return r*(n/100);case"":e=n}}}return t.logicalSize===r?e:e/t.logicalSize*r}function g(e,r){return v(e)?t.themes?r(t.themes[e],JSON.stringify(t.themes[e])):function(e,t){let r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET","/themes/"+e+".json",!0),r.onreadystatechange=function(){4==r.readyState&&"200"==r.status&&t(r.responseText)},r.send(null)}(e,e=>{r(JSON.parse(e),e)}):r(e,JSON.stringify(e))}if("undefined"!=typeof document){let e=()=>{document.querySelectorAll("canvas[data-revolve]").forEach(e=>{t[e.dataset.revolve](e.getContext("2d"),x(!0,{},e.dataset))})};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e)}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return e&&"[object Function]"==={}.toString.call(e)}function v(e){return"string"==typeof e}function x(){let e,t,r,s,n,i,a=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[o]||{},o++),"object"!=typeof a&&"function"!=typeof a&&(a={});o<l;o++)if(null!==(e=arguments[o]))for(t in e)r=a[t],a!==(s=e[t])&&(c&&s&&(m(s)||(n=s.constructor===Array))?(n?(n=!1,i=r&&r.constructor===Array?r:[]):i=r&&m(r)?r:{},a[t]=x(c,i,s)):void 0!==s&&(a[t]=s));return a}return t});
